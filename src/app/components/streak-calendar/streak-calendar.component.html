<div class="streak-calendar">
  <div class="calendar-header">
    <div class="header-left">
      <h2>ğŸ“… Learning Streak</h2>
      <p class="subtitle">Track your daily learning activity</p>
    </div>
    <button class="view-toggle-btn" (click)="toggleView()">
      {{ viewMode === 'year' ? 'ğŸ“† Month View' : 'ğŸ“… Year View' }}
    </button>
  </div>

  <!-- Stats Section -->
  <div class="stats-section">
    <div class="stat-card">
      <div class="stat-value">{{ currentStreak }}</div>
      <div class="stat-label">Current Streak</div>
      <div class="stat-emoji">{{ getStreakEmoji() }}</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">{{ longestStreak }}</div>
      <div class="stat-label">Longest Streak</div>
      <div class="stat-emoji">ğŸ†</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">{{ totalContributions }}</div>
      <div class="stat-label">Total Activities</div>
      <div class="stat-emoji">ğŸ“š</div>
    </div>
  </div>

  <!-- Calendar Grid -->
  <div class="calendar-container">
    <div class="calendar-grid" [class.month-view]="viewMode === 'month'">
      <div
        *ngFor="let day of calendarDays"
        class="calendar-day"
        [class]="getActivityClass(day)"
        [class.today]="day.isToday"
        [class.future]="day.isFuture"
        [class.out-of-range]="!day.isInRange"
        [style.background-color]="getActivityColor(day)"
        (mouseenter)="onDayHover(day, $event)"
        (mouseleave)="onDayLeave()"
        [title]="day.activity ? formatDate(day.date) + ': ' + day.activity.count + ' activities' : formatDate(day.date)"
      >
        <span class="day-tooltip-text" *ngIf="day.isToday">Today</span>
      </div>
    </div>
  </div>

  <!-- Legend -->
  <div class="legend">
    <span class="legend-label">Less</span>
    <div class="legend-colors">
      <div class="legend-item day-none"></div>
      <div class="legend-item day-level-1"></div>
      <div class="legend-item day-level-2"></div>
      <div class="legend-item day-level-3"></div>
      <div class="legend-item day-level-4"></div>
    </div>
    <span class="legend-label">More</span>
  </div>

  <!-- Tooltip -->
  <div
    class="day-tooltip"
    *ngIf="showTooltip && selectedDay"
    [style.left.px]="tooltipX + 10"
    [style.top.px]="tooltipY - 10"
  >
    <div class="tooltip-date">{{ getSelectedDayFormattedDate() }}</div>
    <div class="tooltip-count">
      <strong>{{ selectedDay.count }}</strong> {{ selectedDay.count === 1 ? 'activity' : 'activities' }}
    </div>
  </div>
</div>

